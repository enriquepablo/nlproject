

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Time and now &mdash; nlproject 1.0dev documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nlproject 1.0dev documentation" href="index.html" />
    <link rel="up" title="Documentation for nl" href="nl_intro.html" />
    <link rel="next" title="Arithmetics" href="arithmetics.html" />
    <link rel="prev" title="Rules - basic" href="rules.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="arithmetics.html" title="Arithmetics"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rules.html" title="Rules - basic"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">nlproject 1.0dev documentation</a> &raquo;</li>
          <li><a href="nl_intro.html" accesskey="U">Documentation for nl</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="time-and-now">
<h1>Time and now<a class="headerlink" href="#time-and-now" title="Permalink to this headline">¶</a></h1>
<p>This part of nl is perhaps the most fishy, and one that is completely optional. It is perfectly possible to use nl without ever instantiating instants or durations with the string <tt class="docutils literal"><span class="pre">'now'</span></tt>, and thus to totally ignore this part of the documentation.</p>
<div class="section" id="time-and-language">
<h2>Time and language<a class="headerlink" href="#time-and-language" title="Permalink to this headline">¶</a></h2>
<p>Time passes. Other dimensions, such as space or mass, don&#8217;t. There is a distinguished and everchanging point in time, which we call &#8220;now&#8221;. Every physical dimension is &#8220;enveloped&#8221; by time, and therefore, affected by that special instant (physical objects change their &#8220;position&#8221; in those dimensions over a line of nows in time). However, logic is not physical, and thus not affected by the passage of time. There is a difficulty here because we, the ones that use logic, are physical. We develop (or discover) and use logic within time. Therefore, we, within time, need logic to speak about time, to envelope time. But we are getting too philosophical, and that&#8217;s not practical.</p>
<p>The practical things regarding this issue are the following, and, as can be easily seen, they don&#8217;t fit within classical logic:</p>
<blockquote>
<div><ol class="arabic simple">
<li>We want to be able to say &#8220;now&#8221;, at the same time as we want to be able to name any particular instant of time. Obviously, &#8220;now&#8221; has to correspond to different instants when uttered at different times. And that, of course, easily leads to contradiction.</li>
<li>We want to be able to say various things at the same &#8220;now&#8221;. Many things happen presently, but we may only say one thing at a time, so, to describe what happens now, we need a trick to cram the same &#8220;now&#8221; into any number of sentences.</li>
<li>We need a continuous present tense. The future is mostly unknown, so, if something is happening now, we need a duration that starts in the past and ends in a moving &#8220;now&#8221;, and can be terminated.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="discrete-time">
<h2>Discrete time<a class="headerlink" href="#discrete-time" title="Permalink to this headline">¶</a></h2>
<p>As we have seen when introducing <tt class="docutils literal"><span class="pre">Instant</span></tt>, in nl we take time to be discrete: any point in time is represented by an integer. An instant in nl has no duration. At instant 1 we have a state of affairs, at instant 2 we have another, and in between, we have no state of affairs. This is not a philosophical or scientific stance; it is merely practical. We are free to interpret how long does it take to go from one instant to the next in any particular discourse developed with nl: it may be a milisecond, a second, or a year.</p>
</div>
<div class="section" id="saying-now">
<h2>1. Saying &#8220;now&#8221;<a class="headerlink" href="#saying-now" title="Permalink to this headline">¶</a></h2>
<p>So, we want to be able to say &#8220;now&#8221;. That is easy; with python, we would just say <tt class="docutils literal"><span class="pre">import</span> <span class="pre">time;</span> <span class="pre">time.time()</span></tt>. With nl, we instantiate <tt class="docutils literal"><span class="pre">Instant</span></tt> with, instead of an integer, the string <tt class="docutils literal"><span class="pre">&quot;now&quot;</span></tt>: <tt class="docutils literal"><span class="pre">Instant(&quot;now&quot;)</span></tt>. In general (though not always, as we shall see below), nl will instantiate that instant with whatever integer it thinks that corresponds to the present time. &#8220;It thinks&#8221; means that it has an internal variable where it stores an integer that is made to correspond with the present time.</p>
</div>
<div class="section" id="saying-several-things-now">
<h2>2. Saying several things now<a class="headerlink" href="#saying-several-things-now" title="Permalink to this headline">¶</a></h2>
<p>We want to be able to say several things at the same time. We want to be able to say &#8220;John wants to eat now. Can he (now)?&#8221;, and both nows have to correspond, and cannot be different just because we take some time in saying one sentence after the other. In nl, we solve that by passing time explicitly, by calling a function <tt class="docutils literal"><span class="pre">now()</span></tt>. The internal variable mentioned above, that stores the present time, only changes when we tell it to change by calling the function <tt class="docutils literal"><span class="pre">now()</span></tt>. So:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">now</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i1</span> <span class="o">=</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&quot;now&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i2</span> <span class="o">=</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&quot;now&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">now</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i3</span> <span class="o">=</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&quot;now&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">i3</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Every <tt class="docutils literal"><span class="pre">Instant(&quot;now&quot;)</span></tt> between consecutive calls to <tt class="docutils literal"><span class="pre">now()</span></tt> coincide, have the same meaning, and correspond to the same internal CLIPS construct. This means that nl defaults gracefully if you choose to not use its &#8220;time facilities&#8221;.</p>
<p>There are 2 ways of using <tt class="docutils literal"><span class="pre">now()</span></tt>, one that establishes what we will call a &#8220;fictional time&#8221;, and another that establishes &#8220;historical time&#8221;.</p>
<blockquote>
<div><strong>Fictional time</strong></div></blockquote>
<p>To establish fictional time, we call <tt class="docutils literal"><span class="pre">now(n)</span></tt> with an integer argument. That integer is what is stored by nl as &#8220;now&#8221; until a subsequent call to <tt class="docutils literal"><span class="pre">now(n)</span></tt> with another integer (not necessarily consecutive, but bigger). We are then free to give any interpretation to the difference between consecutive instants: seconds, years, whatever.</p>
<blockquote>
<div><strong>Historical time</strong></div></blockquote>
<p>To establish historical time, we call <tt class="docutils literal"><span class="pre">now()</span></tt> with no arguments. In this case, nl makes a call to the <tt class="docutils literal"><span class="pre">time()</span></tt> function of the <tt class="docutils literal"><span class="pre">time</span></tt> module from the standard library, converts the result to an integer, and stores that as the present time. This means that, in principle, <tt class="docutils literal"><span class="pre">Instant(0)</span></tt> corresponds to the start of the year 1970, and the difference between 2 consecutive instants corresponds to a second. We may change this, however, by calling 2 functions at the beginning of the discourse: <tt class="docutils literal"><span class="pre">time_granularity(gr)</span></tt> and <tt class="docutils literal"><span class="pre">start_of_time(start)</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">time_granularity(gr)</span></tt> is called with a <tt class="docutils literal"><span class="pre">float</span></tt> argument that divides the default granularity of historical time (seconds). So, to establish that the time elapsed between 2 consecutive instants is a milisecond, we call it with <tt class="docutils literal"><span class="pre">1000.0</span></tt>, and to establish that it is a minute, we call it with <tt class="docutils literal"><span class="pre">1.0/60.0</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">start_of_time(start)</span></tt> is called with an integer that is interpreted as the difference (in whatever units of time we have established with <tt class="docutils literal"><span class="pre">time_granularity(gr)</span></tt>) between our intended start of time and the beginning of 1970. So, to measure time in milliseconds and establish the start of time one second after the beginning of 1970, we would do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_granularity</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_of_time</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>To measure time in hours and to start time at the beginning of the 31st of december of 1969, we would:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_granularity</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3600.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_of_time</span><span class="p">(</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
<p>etc.</p>
</div>
<div class="section" id="a-continuous-present-time">
<h2>3. A continuous present time<a class="headerlink" href="#a-continuous-present-time" title="Permalink to this headline">¶</a></h2>
<p>Finally, we want a continuous present tense. We want to say &#8220;from now onwards&#8221;, and have an open ended interval of time, that can be terminated according to as yet unknown conditions. To achieve that, there is a special treatment of &#8220;now&#8221; in durations. If the start of a duration is <tt class="docutils literal"><span class="pre">Instant(&quot;now&quot;)</span></tt>, it will be assigned the integer that nl has internally stored as the present time. However, if the end of a duration is <tt class="docutils literal"><span class="pre">Instant(&quot;now&quot;)</span></tt>, it will adopt a special value, (actually, <tt class="docutils literal"><span class="pre">-1</span></tt>), corresponding to a continuous present. When comparing times, nl will interpret that this special value is bigger than whatever it has stored as the present time, but smaller than that plus 1. This way, a fact that has a duration that ends in &#8220;now&#8221; will have a continuous present tense.</p>
</div>
<div class="section" id="finalization-of-the-continuous-present-tense">
<h2>Finalization of the continuous present tense<a class="headerlink" href="#finalization-of-the-continuous-present-tense" title="Permalink to this headline">¶</a></h2>
<p>There are ways, in rules, to terminate that continuous present, and so convert those sentences to a perfect tense. This is the non-monotonic trick we spoke about in the introduction to this documentation. The monotonicity of the whole system is however kept, since there is never a reduction in the number of sentences within the knowledge base. Further, this termination propagates to whatever consecuences we may have derived from our original sentence.</p>
<p>To do so, we can use, as a consecuence in rules, an expression built with <tt class="docutils literal"><span class="pre">Finish</span></tt>, that accepts 2 arguments, a duration, and an instant within that duration, and truncates the duration so that it ends in the provided instant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nl</span> <span class="kn">import</span> <span class="n">Finish</span>
</pre></div>
</div>
<p>Now, suppose that we want to assert that, if someone loves someone else, and the lover dies, he stops loving her.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Dies</span><span class="p">(</span><span class="n">Exists</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">subject</span> <span class="o">=</span> <span class="n">HumanBeing</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">tell</span><span class="p">(</span><span class="n">Rule</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">Fact</span><span class="p">(</span><span class="n">HumanBeing</span><span class="p">(</span><span class="s">&#39;H1&#39;</span><span class="p">),</span> <span class="n">Loves</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">HumanBeing</span><span class="p">(</span><span class="s">&#39;H2&#39;</span><span class="p">)),</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;D1&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">Fact</span><span class="p">(</span><span class="n">HumanBeing</span><span class="p">(</span><span class="s">&#39;H1&#39;</span><span class="p">),</span> <span class="n">Dies</span><span class="p">(),</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&#39;I1&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">During</span><span class="p">(</span><span class="s">&#39;I1&#39;</span><span class="p">,</span> <span class="s">&#39;D1&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],[</span>
<span class="gp">... </span>    <span class="n">Finish</span><span class="p">(</span><span class="s">&#39;D1&#39;</span><span class="p">,</span> <span class="s">&#39;I1&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">]))</span>
</pre></div>
</div>
<p>Now, if we have that John loves Yoko from 3 onwards, and John dies now, John&#8217;s love for Yoko terminates now:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">tell</span><span class="p">(</span><span class="n">Fact</span><span class="p">(</span><span class="n">john</span><span class="p">,</span> <span class="n">Loves</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">yoko</span><span class="p">),</span> <span class="n">Duration</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;now&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">tell</span><span class="p">(</span><span class="n">Fact</span><span class="p">(</span><span class="n">john</span><span class="p">,</span> <span class="n">Dies</span><span class="p">(),</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&quot;now&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">extend</span><span class="p">()</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Now, to make time advace within nl&#8217;s knowledge base, we have to execute the function <tt class="docutils literal"><span class="pre">now</span></tt>, and we can see that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nl</span> <span class="kn">import</span> <span class="n">now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">now</span><span class="p">()</span>
<span class="go">1281517957.0</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">Fact</span><span class="p">(</span><span class="n">john</span><span class="p">,</span> <span class="n">Loves</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">yoko</span><span class="p">),</span> <span class="n">Instant</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kb</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">Fact</span><span class="p">(</span><span class="n">john</span><span class="p">,</span> <span class="n">Loves</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">yoko</span><span class="p">),</span> <span class="n">Instant</span><span class="p">(</span><span class="s">&quot;now&quot;</span><span class="p">)))</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Time and now</a><ul>
<li><a class="reference internal" href="#time-and-language">Time and language</a></li>
<li><a class="reference internal" href="#discrete-time">Discrete time</a></li>
<li><a class="reference internal" href="#saying-now">1. Saying &#8220;now&#8221;</a></li>
<li><a class="reference internal" href="#saying-several-things-now">2. Saying several things now</a></li>
<li><a class="reference internal" href="#a-continuous-present-time">3. A continuous present time</a></li>
<li><a class="reference internal" href="#finalization-of-the-continuous-present-tense">Finalization of the continuous present tense</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rules.html"
                        title="previous chapter">Rules - basic</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="arithmetics.html"
                        title="next chapter">Arithmetics</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/time2.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="arithmetics.html" title="Arithmetics"
             >next</a> |</li>
        <li class="right" >
          <a href="rules.html" title="Rules - basic"
             >previous</a> |</li>
        <li><a href="index.html">nlproject 1.0dev documentation</a> &raquo;</li>
          <li><a href="nl_intro.html" >Documentation for nl</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Enrique Pablo Pérez Arnaud &lt;enriquepablo at google&#39;s mail domain&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>