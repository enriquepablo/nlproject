

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>npl language essentials &mdash; nlproject 1.0dev documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nlproject 1.0dev documentation" href="index.html" />
    <link rel="up" title="The npl language" href="nl_lang.html" />
    <link rel="next" title="Arithmetics." href="npl_arith.html" />
    <link rel="prev" title="Installation and execution." href="npl_install.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="npl_arith.html" title="Arithmetics."
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="npl_install.html" title="Installation and execution."
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">nlproject 1.0dev documentation</a> &raquo;</li>
          <li><a href="nl_lang.html" accesskey="U">The npl language</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="npl-language-essentials">
<h1>npl language essentials<a class="headerlink" href="#npl-language-essentials" title="Permalink to this headline">¶</a></h1>
<p><strong>npl</strong> is a logic programming language. In the use of <strong>npl</strong> there
are basically 4 stages:</p>
<blockquote>
<div><ul class="simple">
<li>Define terms;</li>
<li>Build statements and rules with those terms;</li>
<li>Extend the set of statements and rules to all logical consequences;</li>
<li>Query that extended set.</li>
</ul>
</div></blockquote>
<p><strong>npl</strong> offers a superior expressive power when compared to the rest of logic
programming languages (that I know of). For example, it is possible in <strong>npl</strong>
to treat classes
or relations (well, <strong>npl</strong>&#8216;s functional equivalent of the classes and relations
of other logic languages) as individuals.
Note that <strong>npl</strong> is based on a finite domain first order logical theory that is
consistent and complete.</p>
<p>I&#8217;m going to describe the <strong>npl</strong> language going through its BNF grammar, from
top down. To illustrate the different constructs of the language, I will
be sketching along a set of terms, statements and rules to hold the bussiness
logic of a content management system.</p>
<div class="section" id="sentences">
<h2>Sentences<a class="headerlink" href="#sentences" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>sentence : statement
         | question
         | order</pre>
</div>
<p>Sentences are the top level grammatical elements. These are the elements that
can be entered (told or asked) into npl&#8217;s knowledge base (kb). There are 3
kinds of sentences, statements questions and orders. Statements
add to the information held in the kb, and questions query the kb. Orders
do different things to the kb.</p>
</div>
<div class="section" id="statements">
<h2>Statements<a class="headerlink" href="#statements" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>statement : definition DOT
          | fact DOT
          | rule DOT

DOT : "."</pre>
</div>
<p>Statements are asserted: they have truth value.
There are 3 main forms of statements, all ended with a dot, which we will
call definitions, facts, and rules.
Definitions are used to define terms. Facts use those terms to establish
relations among them. And rules establish relations (logical relations,
basically implication) among the relations expressed in the terms.</p>
</div>
<div class="section" id="definition-of-terms">
<h2>Definition of terms<a class="headerlink" href="#definition-of-terms" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>definition : noun-def
           | name-def
           | verb-def</pre>
</div>
<p>There are 3 types of terms we can define. We will call them (proper) names,
nouns, and verbs.</p>
<div class="section" id="noun-definitions">
<h3>Noun definitions<a class="headerlink" href="#noun-definitions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>noun-def : TERM ARE TERM

ARE : "are"

TERM : &lt;a lower case letter followed by any number of lower case letters,
          underscores, and digits. 2 underscores in a row are forbidden&gt;</pre>
</div>
<p>We define a new noun by relating it with another (already defined) noun through
the reserved word <tt class="docutils literal"><span class="pre">are</span></tt>. To get started, we use a primitive predefined noun,
<tt class="docutils literal"><span class="pre">thing</span></tt>.</p>
<p><strong>001</strong>  <tt class="docutils literal"><span class="pre">person</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>002</strong>  <tt class="docutils literal"><span class="pre">content</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>003</strong>  <tt class="docutils literal"><span class="pre">document</span> <span class="pre">are</span> <span class="pre">content.</span></tt></p>
<p><strong>004</strong>  <tt class="docutils literal"><span class="pre">image</span> <span class="pre">are</span> <span class="pre">content.</span></tt></p>
<p><strong>005</strong>  <tt class="docutils literal"><span class="pre">context</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
</div>
<div class="section" id="name-definitions">
<h3>Name definitions<a class="headerlink" href="#name-definitions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>name-def : TERM ISA TERM

ISA : "isa"</pre>
</div>
<p>Proper names are defined relating them with a noun through the reserved word
<tt class="docutils literal"><span class="pre">isa</span></tt>.</p>
<p><strong>005</strong>  <tt class="docutils literal"><span class="pre">john</span> <span class="pre">isa</span> <span class="pre">person.</span></tt></p>
<p><strong>006</strong>  <tt class="docutils literal"><span class="pre">sue</span> <span class="pre">isa</span> <span class="pre">person.</span></tt></p>
<p><strong>007</strong>  <tt class="docutils literal"><span class="pre">pete</span> <span class="pre">isa</span> <span class="pre">person.</span></tt></p>
<p><strong>008</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">isa</span> <span class="pre">person.</span></tt></p>
<p><strong>009</strong>  <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">isa</span> <span class="pre">document.</span></tt></p>
<p><strong>010</strong>  <tt class="docutils literal"><span class="pre">doc2</span> <span class="pre">isa</span> <span class="pre">document.</span></tt></p>
<p><strong>011</strong>  <tt class="docutils literal"><span class="pre">img1</span> <span class="pre">isa</span> <span class="pre">image.</span></tt></p>
<p><strong>012</strong>  <tt class="docutils literal"><span class="pre">img2</span> <span class="pre">isa</span> <span class="pre">image.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">ctx1</span> <span class="pre">isa</span> <span class="pre">context.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">ctx2</span> <span class="pre">isa</span> <span class="pre">context.</span></tt></p>
</div>
<div class="section" id="types-of-terms">
<h3>Types of terms.<a class="headerlink" href="#types-of-terms" title="Permalink to this headline">¶</a></h3>
<p>Names and nouns establish a class structure. The relation established by <tt class="docutils literal"><span class="pre">are</span></tt>
among 2 nouns has the same form as the subclass relation among 2 classes, and
the relation established by <tt class="docutils literal"><span class="pre">isa</span></tt> among a name and a noun has the same form as
the relation between an individual and a class it belongs to. So, for example,
the above definitions entail that <tt class="docutils literal"><span class="pre">document</span> <span class="pre">are</span> <span class="pre">thing</span></tt>, or that
<tt class="docutils literal"><span class="pre">mary</span> <span class="pre">isa</span> <span class="pre">thing</span></tt>. This means that if we ask the system for <tt class="docutils literal"><span class="pre">thing``s,</span> <span class="pre">``mary</span></tt>
will be retrieved, and if in a rule we require a <tt class="docutils literal"><span class="pre">thing</span></tt>, <tt class="docutils literal"><span class="pre">mary</span></tt> will match.</p>
<p>This class structure is explicit in the case of nouns and names, and is
(implicitly) pervasive among the rest of terms in <strong>npl</strong>. So, for
example, all predicates
(predicates are complex terms composed of a verb and any number of modifiers,
as we shall see below) are implicitly related by <tt class="docutils literal"><span class="pre">isa</span></tt> with their verbs.
In addition, all verbs are to be thought of as related through <tt class="docutils literal"><span class="pre">isa</span></tt> with the
predifined term <tt class="docutils literal"><span class="pre">verb</span></tt>, and all nouns with <tt class="docutils literal"><span class="pre">noun</span></tt>, all numbers with
<tt class="docutils literal"><span class="pre">number</span></tt>, and all times with <tt class="docutils literal"><span class="pre">time</span></tt>.</p>
<p>This allows us to talk about types of terms. A type of terms is a term, and
the terms that are of that type are the terms related with the type term
through <tt class="docutils literal"><span class="pre">isa</span></tt>. Therefore, we have six mayor types of term: <tt class="docutils literal"><span class="pre">noun</span></tt>, <tt class="docutils literal"><span class="pre">verb</span></tt>,
<tt class="docutils literal"><span class="pre">thing</span></tt>, <tt class="docutils literal"><span class="pre">exists</span></tt> (the primitive predefined verb), <tt class="docutils literal"><span class="pre">number</span></tt>, and <tt class="docutils literal"><span class="pre">time</span></tt>,
and any number of subtypes of those.</p>
<p>For example, <tt class="docutils literal"><span class="pre">doc1</span></tt> is a term of type <tt class="docutils literal"><span class="pre">thing</span></tt>, and <tt class="docutils literal"><span class="pre">document</span></tt> is a term of type
<tt class="docutils literal"><span class="pre">noun</span></tt>.</p>
<p>NOTE: since the definitions of verbs set bounds on the predicates and facts
where they can appear, we shall defer their introduction until we have
introduced predicates and facts.</p>
</div>
</div>
<div class="section" id="facts">
<h2>Facts.<a class="headerlink" href="#facts" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>fact : subject predicate

subject : TERM</pre>
</div>
<p>Facts are composed of a subject and a predicate. The subject is
a name, a noun or a verb.</p>
<div class="highlight-python"><pre>predicate : LBRACK verb modification RBRACK
          | LBRACK verb RBRACK

verb : TERM

LBRACK : "["

RBRACK : "]"</pre>
</div>
<p>The predicate is a complex term enclosed in square brackets, composed of a verb
and an (optional) modification.</p>
<div class="highlight-python"><pre>modification : modifier COMMA modification
             | modifier'

COMMA : ","</pre>
</div>
<p>A modification is one or more modifiers, separated by commas.</p>
<div class="highlight-python"><pre>modifier : LABEL object

object : TERM
       | predicate

LABEL : &lt;any sequence of lower case letters&gt;</pre>
</div>
<p>A modifier is composed of a label and an object, that can be any kind of
(atomic or complex) term except a time: a noun, a verb, a name, a number, or a
predicate.</p>
<p>A simple example of a fact could be <tt class="docutils literal"><span class="pre">john</span> <span class="pre">[goes</span> <span class="pre">to</span> <span class="pre">london_zoo]</span></tt>, where <tt class="docutils literal"><span class="pre">john</span></tt>
is the subject and <tt class="docutils literal"><span class="pre">[goes</span> <span class="pre">to</span> <span class="pre">london_zoo]</span></tt> the predicate, where <tt class="docutils literal"><span class="pre">goes</span></tt> is the
verb, and <tt class="docutils literal"><span class="pre">london_zoo</span></tt> is a modifier with label <tt class="docutils literal"><span class="pre">to</span></tt>.</p>
</div>
<div class="section" id="definition-of-verbs">
<h2>Definition of verbs.<a class="headerlink" href="#definition-of-verbs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>verb-def : verb IS verb WITHSUBJECT TERM ANDCANBE modification-def
         | verb IS verb  ANDCANBE modification-def
         | verb IS verb WITHSUBJECT TERM
         | verb IS verb

modification-def : mod-def COMMA modification-def
                 | mod-def

mod-def : LABEL A TERM

IS : "is"

WITHSUBJECT : "withsubject"

ANDCANBE : "andcanbe"

A : "a"</pre>
</div>
<p>In the definition of a verb we can specify 3 different things. First, the
(already defined) verb from which we derive the new verb; second, the type of
term that can act as subject in a fact where the new verb forms the predicate;
and third, the modifiers that the verb can take to form the predicate.</p>
<p>The modifiers that a verb can take are specified through mod-defs, where we
give the label that the modifier will take, connected through the reserved word
<tt class="docutils literal"><span class="pre">a</span></tt> with the type of terms that can be used as that modifier.</p>
<p>So, for
example, let&#8217;s define verbs that express actions that a person can perform on
content. For this we must use the primitive predefined verb
we mentioned earlier: <tt class="docutils literal"><span class="pre">exists</span></tt>.</p>
<p><strong>013</strong>  <tt class="docutils literal"><span class="pre">content_action</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">person</span> <span class="pre">andcanbe</span> <span class="pre">what</span> <span class="pre">a</span> <span class="pre">content.</span></tt></p>
<p><strong>014</strong>  <tt class="docutils literal"><span class="pre">view</span> <span class="pre">is</span> <span class="pre">content_action.</span></tt></p>
<p><strong>015</strong>  <tt class="docutils literal"><span class="pre">edit</span> <span class="pre">is</span> <span class="pre">content_action.</span></tt></p>
<p><strong>016</strong>  <tt class="docutils literal"><span class="pre">owns</span> <span class="pre">is</span> <span class="pre">content_action.</span></tt></p>
<p>We do not need to specify the type of the subject for a verb if it coincides
with that of its parent verb, and, if a mod-def for a child verb coincides with
one of its parent, we do not need to explicitly specify it on the child.
Derived verbs inherit the subject and mod-defs that they do not override.</p>
<p>With this new verbs, we can state facts such as:</p>
<p><strong>013</strong>  <tt class="docutils literal"><span class="pre">pete</span> <span class="pre">[owns</span> <span class="pre">what</span> <span class="pre">doc1].</span></tt></p>
<p><strong>014</strong>  <tt class="docutils literal"><span class="pre">sue</span> <span class="pre">[edit</span> <span class="pre">what</span> <span class="pre">img2].</span></tt></p>
</div>
<div class="section" id="rules">
<h2>Rules.<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>rule : IF COLON conditions SEMICOLON THEN COLON consecuences

conditions : conditions SEMICOLON condition
           | condition

condition : fact
          | name-def

consecuences : consecuences SEMICOLON consecuence
             | consecuence

consecuence : fact

IF : "if"

COLON : ":"

SEMICOLON : ";"

THEN : "then"</pre>
</div>
<p>A rule consists of 2 sets of statements, the conditions and the consecuences.
Conditions and consecuences are, mainly, facts (though they can be other types
of statements, as we shall be seeing below). Atomic facts (facts that are
asserted on their own, outside of rules) can match the conditions of rules,
and, when all conditions in a rule are matched, its consecuences are
automatically (atomically) added to the kb.</p>
<p>An atomic fact matches a condition in a rule if (but not only if) they are
identical (ignoring the order of modifiers in the predicate). It also matches
when they are identical except that the atomic fact specifies more modifiers
than the condition.</p>
<p>We can use logical variables in place of terms in the conditions and
consecuences of a rule. A logical variable is a symbol that starts with a
capital letter, followed by any number of lower case letters and underscores,
and ends with any number of digits. A logical variable has a range, that is a
type of terms. The range of a variable can be obtained by lower casing its
first letter and removing its final digits. A fact will match the condition of
a rule if they are identical except that, where the condition has a variable,
the fact has a term
that is in the range of the variable. The scope of variables is the rule: if a
term matches a variable, it does so for all its occurrences within the rule.</p>
<p>for a first example, we need to add a couple more of BNF rules:</p>
<div class="highlight-python"><pre>subject : VAR

object : VAR

VAR : &lt;an uppercase letter followed by any number of lower case letters,
       digits and underscores and ending in any number of digits. Double
       underscores are forbidden.&gt;</pre>
</div>
<p>So, if we define a verb <tt class="docutils literal"><span class="pre">located</span></tt>, we can build a rule such as what follows.</p>
<p><strong>019</strong> located is exists withsubject thing andcanbe in a context.</p>
<dl class="docutils">
<dt><strong>019</strong>  <a href="#id1"><span class="problematic" id="id2">``</span></a>if:</dt>
<dd><blockquote class="first">
<div>Thing1 [located in Context1];
Context1 [located in Context2];</div></blockquote>
<dl class="last docutils">
<dt>then:</dt>
<dd>Thing1 [located in Context2].``</dd>
</dl>
</dd>
</dl>
<p>With this, if we have that</p>
<p><strong>020</strong>  <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">[located</span> <span class="pre">where</span> <span class="pre">ctx1].</span></tt></p>
<p><strong>021</strong>  <tt class="docutils literal"><span class="pre">ctx1</span> <span class="pre">[located</span> <span class="pre">where</span> <span class="pre">ctx2].</span></tt></p>
<p>The system will conclude that <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">[located</span> <span class="pre">where</span> <span class="pre">ctx2]</span></tt>.</p>
</div>
<div class="section" id="predicate-variables">
<h2>Predicate variables.<a class="headerlink" href="#predicate-variables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>predicate : LBRACK VAR RBRACK</pre>
</div>
<p>We have seen that we can use predicates as objects in the modifiers of other
predicates. This means that, in rules, we must be able to use variables that
range over predicates. We do this by building a variable from a verb, and
enclosing it in square brackets. For example, from <tt class="docutils literal"><span class="pre">locate</span></tt>, we might have
<tt class="docutils literal"><span class="pre">[Locate1]</span></tt> (the brackets are not part of the variable, but mark it as a
predicate).</p>
<p>To provide a working example, we will define a couple of verbs that take a
predicate as modifier, and build a rule with it.</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">wants</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">person</span> <span class="pre">andcanbe</span> <span class="pre">that</span> <span class="pre">a</span> <span class="pre">person,</span> <span class="pre">do</span> <span class="pre">a</span> <span class="pre">content_action.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">is_allowed</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">person</span> <span class="pre">andcanbe</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">content_action.</span></tt></p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">if::</span></tt></dt>
<dd><blockquote class="first">
<div>Person1 [wants that Person1, do [Content_action1]];
Person1 [is_allowed to [Content_action1]];</div></blockquote>
<dl class="last docutils">
<dt>then:</dt>
<dd>Person1 [Content_action1].</dd>
</dl>
</dd>
</dl>
<p>If with all this we say that</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">sue</span> <span class="pre">[wants</span> <span class="pre">that</span> <span class="pre">sue,</span> <span class="pre">do</span> <span class="pre">[wiew</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">sue</span> <span class="pre">[is_allowed</span> <span class="pre">to</span> <span class="pre">[wiew</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<p>The system will conclude that <tt class="docutils literal"><span class="pre">sue</span> <span class="pre">[view</span> <span class="pre">what</span> <span class="pre">doc1]</span></tt>.</p>
</div>
<div class="section" id="verb-variables">
<h2>Verb variables.<a class="headerlink" href="#verb-variables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>predicate : LBRACK VAR VAR RBRACK
          | LBRACK VAR modification RBRACK</pre>
</div>
<p>Since we can have verbs as subject or object in facts, we need to be able to
use variables in rules that range over verbs. We do this by capitalizing the
name of a verb, and appending to it &#8220;Verb&#8221; and an integer. for example, a verb
variable made from <tt class="docutils literal"><span class="pre">locate</span></tt> would be <tt class="docutils literal"><span class="pre">LocateVerb1</span></tt>. To show a more complete
example of this, we define a verb <tt class="docutils literal"><span class="pre">can</span></tt>, that will take a verb as modifier:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">can</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">person</span> <span class="pre">andcanbe</span> <span class="pre">what</span> <span class="pre">a</span> <span class="pre">verb.</span></tt></p>
<p>A rule with this verb:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">if::</span></tt></dt>
<dd><blockquote class="first">
<div>Person1 [wants that Person1, to [Content_actionVerb1 Content_action1]];
Person1 [can what Content_actionVerb1];</div></blockquote>
<dl class="last docutils">
<dt>then:</dt>
<dd>Person1 [Content_action1].</dd>
</dl>
</dd>
</dl>
<p>Let&#8217;s take a look at the construct <tt class="docutils literal"><span class="pre">[Content_actionVerb1</span> <span class="pre">Content_action1]</span></tt>. It
stands for a predicate, and any predicate matching it would also match
<tt class="docutils literal"><span class="pre">[Content_action1]</span></tt>. However, we want to specify that the matching predicate&#8217;s
verb must be the one that matches the variable <tt class="docutils literal"><span class="pre">Content_actionVerb1</span></tt> in the
second condition. Thus the oddly redundant form.</p>
<p>Now we can say:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[wants</span> <span class="pre">that</span> <span class="pre">mary,</span> <span class="pre">do</span> <span class="pre">[wiew</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[can</span> <span class="pre">what</span> <span class="pre">wiew].</span></tt></p>
<p>The system will conclude that <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[view</span> <span class="pre">what</span> <span class="pre">doc1]</span></tt>.</p>
<p>We can also use a verb variable in a predicate with modifiers. Also without
modifiers, just by itself in the predicate, like <tt class="docutils literal"><span class="pre">[Content_actionVerb1]</span></tt>. This
stands for a predicate where the content_action verb is alone without
modifiers, as opposed to <tt class="docutils literal"><span class="pre">[Content_action1]</span></tt> where nothing is said of the
number of modifiers. For an example of verb variables with modifiers, we might
have defined <tt class="docutils literal"><span class="pre">can</span></tt> like:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">can</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">person</span></tt></dt>
<dd><dl class="first last docutils">
<dt>andcanbe what a verb,</dt>
<dd>where a context.</dd>
</dl>
</dd>
</dl>
<p>The rule would now take the form:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">if::</span></tt></dt>
<dd><blockquote class="first">
<div>Person1 [wants that Person1, to [Content_actionVerb1 what Content1]];
Person1 [can what Content_actionVerb1, where Context1];
Content1 [located where Context1];</div></blockquote>
<dl class="last docutils">
<dt>then:</dt>
<dd>Person1 [Content_actionVerb1 what Content1].</dd>
</dl>
</dd>
</dl>
<p>Verb variables can appear in rules anywhere a verb can appear.</p>
<p>Now we might say:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[wants</span> <span class="pre">that</span> <span class="pre">mary,</span> <span class="pre">do</span> <span class="pre">[wiew</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[can</span> <span class="pre">what</span> <span class="pre">wiew,</span> <span class="pre">where</span> <span class="pre">ctx1].</span></tt></p>
<p>The system will conclude that <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[view</span> <span class="pre">what</span> <span class="pre">doc1]</span></tt>.</p>
</div>
<div class="section" id="noun-variables">
<h2>Noun variables.<a class="headerlink" href="#noun-variables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>subject : varvar

object : varvar

varvar :  VAR LPAREN VAR RPAREN

LPAREN : "("

RPAREN : ")"</pre>
</div>
<p>The same we have said about verb variables can be said of noun variables, if
we substitute &#8220;verb&#8221; with &#8220;noun&#8221; throughout the first paragraph of the section
XXX. The only difference is when we want a variable form in a
condition to range
over names that have a type given by another (noun) variable. In that case, we
give the name variable inmediately followed by the noun variable enclosed in
parentheses. For example, <tt class="docutils literal"><span class="pre">Person1(PersonNoun1)</span></tt>.</p>
</div>
<div class="section" id="negation">
<h2>Negation.<a class="headerlink" href="#negation" title="Permalink to this headline">¶</a></h2>
<p>XXX</p>
</div>
<div class="section" id="time">
<h2>Time.<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>fact : subject predicate time</pre>
</div>
<p>We can specify a time as a distinguished part of a fact. This time
has the form of either an integer or a pair of
integers. An integer marks a fact whose interpretation is an
instantaneous happening, and a pair represents an interval of time,
a duration.</p>
<p>The reason we distinguish time (it would in principle suffice to represent
times as just another modifier in the predicate)
is because we want to allow for the
present continuous (this is, for facts that have a starting instant
but not an ending instant). To do this, we employ some non-monotonic
technique. Now, the logic we have drawn up to this moment is strictly
monotonic. And non-monotonicity scares the hell out of me. So, we isolate time
in a reserved place and treat it very carefully, and make it optional.</p>
<p>Time can thus be given as an instant or as a duration. To assert facts,
or to specify conditions in rules, we can only use the present tense.
We assume a closed world were everything is in known the instant it happens,
i.e., we know everything about the past and the present but nothing about the
future.</p>
<div class="section" id="instants">
<h3>Instants.<a class="headerlink" href="#instants" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>order : NOW DOT

time : NOW

NOW : "now"</pre>
</div>
<p>The time can be specified with the term <tt class="docutils literal"><span class="pre">now</span></tt>. We can say:</p>
<p><strong>280</strong> sue [views what doc1] now.</p>
<p>Internally, every instance of <strong>npl</strong> keeps a record of time.
When <strong>npl</strong> is started, this record is set
to the UNIX time of the moment. It is kept like that till further notice. And
further notice is given with the sentence:</p>
<p><strong>290</strong> now.</p>
<p>This causes <strong>npl</strong> to update its internal record with the UNIX time of the moment.
this internal record represents the &#8216;present&#8217; time in the system.</p>
<p>When we say something like fact XXX, the time that is being stored for that fact is
the content of the said &#8216;present&#8217; record at the time of saying. So, if we say several
facts with time &#8220;now&#8221; without changing the internal time with &#8220;now.&#8221;, they will
all have the same time.</p>
<p>The <tt class="docutils literal"><span class="pre">now</span></tt> term is optional, and we might have just said, in place of XXX:</p>
<p><strong>280</strong> sue [views what doc1].</p>
</div>
<div class="section" id="durations">
<h3>Durations.<a class="headerlink" href="#durations" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>time : ONWARDS

ONWARDS : "onwards"</pre>
</div>
<p>To build a duration, we can use the reserved word <tt class="docutils literal"><span class="pre">onwards</span></tt> as the time
component. This will set the starting instant of the duration to the present,
and will set a special value
as the end of the duration. This value will stand for the &#8216;present&#8217; time of the
system, irrespectively of its changes. So, if the present time is 10, the final
instant of these durations will evaluate to 10; and if we change the present
(through <tt class="docutils literal"><span class="pre">now.</span></tt>) to 12, they will evaluate to 12.</p>
</div>
<div class="section" id="time-in-conditions">
<h3>Time in conditions.<a class="headerlink" href="#time-in-conditions" title="Permalink to this headline">¶</a></h3>
<p>In conditions in rules, we can use, either <tt class="docutils literal"><span class="pre">now</span></tt>, <tt class="docutils literal"><span class="pre">onwards</span></tt>, or a duration
variable, that will evaluate to <tt class="docutils literal"><span class="pre">onwards</span></tt> (will be matched were <tt class="docutils literal"><span class="pre">onwards</span></tt>
would) but can be used in consecuences: <tt class="docutils literal"><span class="pre">D1</span></tt>.</p>
</div>
<div class="section" id="time-in-consecuences">
<h3>Time in consecuences.<a class="headerlink" href="#time-in-consecuences" title="Permalink to this headline">¶</a></h3>
<p>In consecuences in rules, we can use the same constructs as in conditions,
plus a special construct with the reserved word <tt class="docutils literal"><span class="pre">until</span></tt> followed by any
number of duration variables (bound in the conditions of the rule):
<tt class="docutils literal"><span class="pre">until</span> <span class="pre">D1,</span> <span class="pre">D2,</span> <span class="pre">D3</span></tt>. This will
create an <tt class="docutils literal"><span class="pre">onwards</span></tt> duration that will be bound to the durations that have
matched the duration variables specified, so that whenever any of them is
terminated, the new one will also be terminated. If two rules produce the
same consecuence, the system will do the right thing (require a condition
of each to be terminated before terminating the consecuence).</p>
</div>
<div class="section" id="terminating-the-continuous-present">
<h3>Terminating the continuous present.<a class="headerlink" href="#terminating-the-continuous-present" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>consecuence : FINISH VAR

FINISH : "finish"</pre>
</div>
<p>There is a special type of consecuence, built with the reserved word
<tt class="docutils literal"><span class="pre">finish</span></tt>, that can be given as a consecuence in rules, like
<tt class="docutils literal"><span class="pre">finish</span> <span class="pre">D1;</span></tt>. This
sentence will change the special value of the final instant of <tt class="docutils literal"><span class="pre">D1</span></tt>,
to replace it with the present. Terminating a duration will terminate
all durations that are derived from it through the <tt class="docutils literal"><span class="pre">until</span></tt> operator.</p>
</div>
</div>
<div class="section" id="final-example">
<h2>Final Example.<a class="headerlink" href="#final-example" title="Permalink to this headline">¶</a></h2>
<p>To round up, I will sketch a workflow machine on top of the terminology we
have developed so far.</p>
<p>First we will need some workflow action verbs:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">wf_action</span> <span class="pre">is</span> <span class="pre">content_action.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">publish</span> <span class="pre">is</span> <span class="pre">wf_action.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">hide</span> <span class="pre">is</span> <span class="pre">wf_action.</span></tt></p>
<p>States for content:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">status</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">public</span> <span class="pre">isa</span> <span class="pre">status.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">private</span> <span class="pre">isa</span> <span class="pre">status.</span></tt></p>
<p>Now we want workflow objects:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">workflow</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p>Workflows are assigned to content types depending on the context:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">is_assigned</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">workflow</span></tt></dt>
<dd><dl class="first last docutils">
<dt>andcanbe to a noun,</dt>
<dd>in a context.</dd>
</dl>
</dd>
</dl>
<p>We also want transitions in those workflows:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">transition</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">has</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">thing</span> <span class="pre">andcanbe</span> <span class="pre">what</span> <span class="pre">a</span> <span class="pre">thing.</span></tt></p>
<p>Transitions relate workflow actions with starting and ending states:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">executed</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">transition</span></tt></dt>
<dd><dl class="first last docutils">
<dt>andcanbe by a wf_action,</dt>
<dd>from a status,
to a status.</dd>
</dl>
</dd>
</dl>
<p>Finally, we need permissions and roles:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">role</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">manager</span> <span class="pre">isa</span> <span class="pre">role.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">editor</span> <span class="pre">isa</span> <span class="pre">role.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">visitor</span> <span class="pre">isa</span> <span class="pre">role.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">permission</span> <span class="pre">are</span> <span class="pre">thing.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">basic_perm</span> <span class="pre">isa</span> <span class="pre">permission.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">edit_perm</span> <span class="pre">isa</span> <span class="pre">permission.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">manage_perm</span> <span class="pre">isa</span> <span class="pre">permission.</span></tt></p>
<p>We reuse the <tt class="docutils literal"><span class="pre">has</span></tt> term to say that roles have permissions, and to say that
people have permissions. We also make a verb
to protect actions with permissions for states in contexts:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">is_protected</span> <span class="pre">is</span> <span class="pre">exists</span> <span class="pre">withsubject</span> <span class="pre">content_action</span></tt></dt>
<dd><dl class="first last docutils">
<dt>andcanbe by a permission,</dt>
<dd>in a context,
for a status.</dd>
</dl>
</dd>
</dl>
<p>And then, we can make a rule that says that if someone wants to perform an
action on a content, the content is in a context, the person has a role,
the role has a permission, and that permissions protects that action in that
context, then he does it:</p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">if::</span></tt></dt>
<dd><blockquote class="first">
<div>Person1 [wants to [Content_actionVerb1 what Content1]];
Content1 [located where Context1];
Content1 [has what Status1];
Person1 [has what Role1];
Role1 [has what Permission1];
Content_actionVerb1 [protected by Permission1, in Context1, for Status1];</div></blockquote>
<dl class="last docutils">
<dt>Then:</dt>
<dd>Person1 [Content_actionVerb1 what Content1].</dd>
</dl>
</dd>
</dl>
<p>Since the only consecuence of the rule is an instantaneous fact, we do not
need to bother about times.</p>
<p>The next rule will use workflow actions to transition content:</p>
<dl class="docutils">
<dt><strong>000</strong>  <a href="#id3"><span class="problematic" id="id4">``</span></a>if::</dt>
<dd><blockquote class="first">
<div>Person1 [Wf_action1 what Content1(ContentNoun1)];
Workflow1 [is_assigned to ContentNoun1, in Context1] D1;
Workflow [has Transition1] D2;
Transition1 [executed by Wf_action1, from Status1, to Status2] D3;
Content1 [has what Status1] D4;</div></blockquote>
<dl class="last docutils">
<dt>then:</dt>
<dd>finish D4;
Content1 [has what Status2] until D1, D2, D3.``</dd>
</dl>
</dd>
</dl>
<p>Let&#8217;s try now some atomic facts:</p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">manager</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">manage_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">manager</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">edit_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">manager</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">basic_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">editor</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">edit_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">editor</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">basic_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">visitor</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">basic_perm]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">publish</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">manage_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">private]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">hide</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">edit_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">public]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">edit</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">edit_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">private]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">edit</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">manage_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">public]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">view</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">edit_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">private]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">view</span> <span class="pre">[is_protected</span> <span class="pre">by</span> <span class="pre">basic_perm,</span> <span class="pre">in</span> <span class="pre">ctx1,</span> <span class="pre">for</span> <span class="pre">public]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">john</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">manager]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">mary</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">editor]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">pete</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">visitor]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">private]</span> <span class="pre">onwards.</span></tt></p>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">pete</span> <span class="pre">[wants</span> <span class="pre">to</span> <span class="pre">[publish</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">pete</span> <span class="pre">[publish</span> <span class="pre">what</span> <span class="pre">doc1]?</span></tt></dt>
<dd>False</dd>
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">Status1]?</span></tt></dt>
<dd>private</dd>
</dl>
<p><strong>000</strong>  <tt class="docutils literal"><span class="pre">john</span> <span class="pre">[wants</span> <span class="pre">to</span> <span class="pre">[publish</span> <span class="pre">what</span> <span class="pre">doc1]].</span></tt></p>
<dl class="docutils">
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">john</span> <span class="pre">[publish</span> <span class="pre">what</span> <span class="pre">doc1]?</span></tt></dt>
<dd>True</dd>
<dt><strong>000</strong>  <tt class="docutils literal"><span class="pre">doc1</span> <span class="pre">[has</span> <span class="pre">what</span> <span class="pre">Status1]?</span></tt></dt>
<dd>public</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">npl language essentials</a><ul>
<li><a class="reference internal" href="#sentences">Sentences</a></li>
<li><a class="reference internal" href="#statements">Statements</a></li>
<li><a class="reference internal" href="#definition-of-terms">Definition of terms</a><ul>
<li><a class="reference internal" href="#noun-definitions">Noun definitions</a></li>
<li><a class="reference internal" href="#name-definitions">Name definitions</a></li>
<li><a class="reference internal" href="#types-of-terms">Types of terms.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#facts">Facts.</a></li>
<li><a class="reference internal" href="#definition-of-verbs">Definition of verbs.</a></li>
<li><a class="reference internal" href="#rules">Rules.</a></li>
<li><a class="reference internal" href="#predicate-variables">Predicate variables.</a></li>
<li><a class="reference internal" href="#verb-variables">Verb variables.</a></li>
<li><a class="reference internal" href="#noun-variables">Noun variables.</a></li>
<li><a class="reference internal" href="#negation">Negation.</a></li>
<li><a class="reference internal" href="#time">Time.</a><ul>
<li><a class="reference internal" href="#instants">Instants.</a></li>
<li><a class="reference internal" href="#durations">Durations.</a></li>
<li><a class="reference internal" href="#time-in-conditions">Time in conditions.</a></li>
<li><a class="reference internal" href="#time-in-consecuences">Time in consecuences.</a></li>
<li><a class="reference internal" href="#terminating-the-continuous-present">Terminating the continuous present.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#final-example">Final Example.</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="npl_install.html"
                        title="previous chapter">Installation and execution.</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="npl_arith.html"
                        title="next chapter">Arithmetics.</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/bnf.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="npl_arith.html" title="Arithmetics."
             >next</a> |</li>
        <li class="right" >
          <a href="npl_install.html" title="Installation and execution."
             >previous</a> |</li>
        <li><a href="index.html">nlproject 1.0dev documentation</a> &raquo;</li>
          <li><a href="nl_lang.html" >The npl language</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Enrique Pablo Pérez Arnaud &lt;enriquepablo at google&#39;s mail domain&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>